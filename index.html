<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"
    />
    <title>Local 1Food Menu</title>
  </head>
  <body style="background-color: #f1f5f9">
    <div style="display:flex; gap:20px; justify-content:center; margin: 10px;">
      <div style="padding:16px; background:#9ca6b1" data-button="1">1</div>
      <div style="padding:16px; background:#9ca6b1" data-button="2">2</div>
      <div style="padding:16px; background:#9ca6b1" data-button="3">3</div>
      <div style="padding:16px; background:#9ca6b1" data-button="4">4</div>
    </div>
   
    <!-- Menu Design 1 -->
    <div id="OneFoodMenu" class="container"></div>
    <script type="module">
        
        import { createMenu } from './main.js'
        import menuData from './menu.json'

        let ofmNode = document.getElementById('OneFoodMenu')

        function toggleDesignClass(nodeEl, versionNumber) {
              // Get all classes on the element
              const allClasses = nodeEl.classList;

              // Loop through the classes to find the one starting with 'ofm-design'
              for (const className of allClasses) {
                  if (className.startsWith("ofm-design-v")) {
                      // Toggle the class
                      nodeEl.classList.remove(className);
                  }
              }

            nodeEl.classList.add(`ofm-design-v${versionNumber}`);
        }
        
          let menuConfig = {
            version: 4,
            priceSymbol: '$',
            priceSymbolPosition: 'after',
            allergens: {
              title: 'Allergens',
              show: true,
            },
            disableCredits: false,
          }

          createMenu(menuData, menuConfig)
          toggleDesignClass(ofmNode, menuConfig.version)
          
          function createAgain(nr) {
            // console.log(nr)
            menuConfig.version = +nr
            createMenu(menuData, menuConfig)
            toggleDesignClass(ofmNode, menuConfig.version)
          }


          let btns = document.querySelectorAll('[data-button]')

          btns.forEach(btn => {
            btn.addEventListener('click', () =>  {
              createAgain(btn.getAttribute('data-button'))
            })
          })


    </script>
    <style>
      .one-food-menu {
        /* --ofm-brand-color: rgb(28, 43, 87);
        --ofm-price-color: rgb(41, 41, 51);
        --ofm-bg-color: rgb(229, 229, 229);
        --ofm-border-color: rgb(229, 229, 229);
        --ofm-tag-color: rgb(255, 255, 255);
        --ofm-tag-bg-color: rgb(7, 87, 200);
        --ofm-allergen-color: rgb(255, 255, 255);
        --ofm-allergen-bg-color: rgb(157, 13, 152); */
      }
    </style>
  </body>
</html>